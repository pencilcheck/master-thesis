\cleardoublepage
\singlespacing
\chapter{CONCLUSION}
\label{c:conclusion}
\doublespacing\nointerlineskip

%Previous chapters have described the work that has been done on WuKong platform.
%It is useful to reflect on what has been accomplished and place them in the
%broader context of the more general fault tolerance problem as well as the
%specific contributions of this work.

\section{Discussion}

This thesis proposed a novel algorithm to achieve
recovery from failures by combining heartbeat protocol, for failure detection,
with Strips, which are used to maintain and track service redundancy.

We have presented a fault tolerance system able to provide failover for failed
services in service-oriented WSNs that comply with user policy requirements. We
have also described strip, a redundancy abstraction for service peers along with
distributed algorithms to synchronize strip views among members and
reconfigurate the network for the new structure to recover from node failure.
The system allows user intervention through means of user policy, which could
directly influence underlying system configurations and structure.

The developed methods adds new and useful solutions to build a fault tolerant
system that could be reasoned easily and with a performance as expected on
average. This method might not be superior to other methods in terms of
completeness and complexity, but it serves as a quick and easy solution
to provide practical fault tolerance for WuKong applications.

% TODO: summarize the results of the experiments here, etc
% e.g. The solutions developed for WuKong system performs very consistently, as
% the recovery time is always under two secs on average with a handful of
% sensors. However, occationally heartbeats could report erroneous failures and
% result in a quick false recovery, and left the partitioned nodes behind, but
% the system as a whole still function properly.

The experimental results have shown to be consistent and stable among first
failures in different rank of members in strip around 2.5 secs. The failover
have been successful in all deployments. It is also shown that the performance
degraded quickly when the hardware or the wireless communication quality
degraded. Therefore it is important that the network setup is as optimized as
possible. 

\section{Future Work}

We have shown a design for a reconfigurable fault tolerant system for WuKong.
Strips makes it really easy to describe a component system with redundancy for
heterogeneous services and devices. Nevertheless, there is still room for
improvements. This section will address some directions future research can take.

WuKong Fault Tolerance System didn't considered for multi-hop networks where it
introduces higher latency and network partitions.  Network partition is when
a network of nodes got partitioned into two subnetworks where none can detect
each other for a period of time. One of the possible direction is to create
a more complex failure model that could handle network partition. In this thesis
we assume failstop model where nodes, once dead, will not come back. Therefore
when network partition occurs, each subpart of the network would not be able to
recognize each other and would cause conflicts and confusions.

Our current heartbeat protocol is distributed and easy to construct, but it is
not shown to work under networks where messages are sent in multiple hops, since
the algorithm used to produce where each node should be sending heartbeat
messages does not consider the topology of the network. Heartbeat is sensitive
on latency, so if a heartbeat message was not received within tolerance period,
a failure event could occur and the node is suspected of failure and will
never come back. If the node is still alive, it would be treated as if it is
dead. And that will creates an artificial network isolation where a few nodes
are excluded from the network before of latency.

Although we didn't mentioned in system design, it is possible to handle multiple
consecurive errors by storing in advance more node's strip and heartbeat
protocol data, so when consecutive nodes failed simultaenously, the surviving
detector would be able to recover all dead services and reconfigure the network
correctly.  But there is a limitation of the memory a node could store,
a possible future direction for research could be to improve the design so it
could handle multiple simultaneous failures in large network.


\begin{comment}
Niels suggested that I show that I am aware of such issue with determining
optimality for deployment which is not clear for WuKong yet, there are many
ways or metrics to optimize for, all I can do in this work is to identify some
tradeoffs certain deployment for fault tolerance could influence the system
with certain metrics.

Limits will be hard to define here
Niels:about the tradeoffs in determining the deployment from your fault
tolerance perspective
Penn:Remember what the prof told me, about policy, first fit, last fit, etc
\end{comment}

Another important element is the optimization problem for deployment of
applications. This thesis didn't consider finding a optimal deployment for the
level of redundancy specified in the user policy. The problem of deploying
a specific distributed system onto a network structure typically consists of
mapping the components of the system onto the hosts of the network. The mapping
is subject to constraints. The constraints could be whether a node supports
certain service to host certain components, and how much communication overhead
would induce from the assignment to maintain consistency for the strips, and
from the perspective of WuKong, some components need to seaparate from other
components to achieve fault tolerance, and some needs to place together to
function properly.  Determining such an optimal deployment is a combinatorial
optimization problem, and combinatorial optimization problems generally
extremely challenging computationally. It is difficult to predict what will and
what will not work.  It is unlikely that a single approach will be effective on
all problems or instances of the same problems. As we also want the system to
come up with a solution within a time limit. So finding a good balance between
the quality of a solution of the time it takes to come up with a good enough
solution is critical.
