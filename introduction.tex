\cleardoublepage
\singlespacing
\chapter{INTRODUCTION}
\label{c:intro}
\doublespacing\nointerlineskip

Internet-of-Things (IoT), also known as machine-to-machine (M2M), refers to the
pervasive presence of uniquely identifiable objects (things) around us - such as
Radio Frequency IDentification (RFID) tags, sensors,
actuators, mobile phones, etc, which would be able to interact with each
other forming a network like structure. 
The paradigm gradually leads to all objects surrounding us to become connected
to the internet, to interact with other connected objects on the other end of
the web and have access to comparative information which would not be possible
before.
An example would be environmental monitoring where sensors are scattered across
a vast land, where they could detect, identify phenomena at the area when it is
happening. 

IoT is being realized in M2M systems such as wireless sensor networks (WSN).
WSNs are areas filled with network of tiny, resource limited sensors
communicating wirelessly. Each sensor is capable of sensing the enviornment in
its proximity. Wireless sensor networks are typically employed in a variety of
applications ranging from home automation to millitary.
Sensor networks offer the ability to monitor real-world phenomena in detail and
at large scale by embedding devices into the environment. Deployment is
about setting up an sensor network in a real-world environment, and it is
a labor-intensize and cumbersome task since environmental influences or
loose program logic in code might trigger bugs or sensor failures that
degrade performance in any way that has not been observed during pre-deployment
testing in the lab.
The real world has strong influences of the function of a sensor network that
could change the quality of wireless communication links, and by putting
extreme physical strains on sensor nodes. Laboratory testbed or simulator can 
only model to a very limited extent of those influences.
There have been several reports on sensor network installations where they
encountered problems during their
deployment\cite{Barrenetxea2008,Polastre2004,Arora2004,Tateson2005,Padhy2005,Stoianov2007,Tolle2005,Werner-Allen2006a}.
Testbed in laboratory environment can still not model the full extents of the
influences a real world enviroment could do. Deployment still a big problem in
wireless sensor network applications.
This is exacerbated by the fact that Wireless Sensor Network (WSN) programming
can only be performed by experts because of resource constraints and their high
failure probability. Hence, transforming the paradigm of service-oriented
architecture (SOA) to sensor networks becomes an important research in the last
few years.~\cite{Koutsoukos2007,Hughes2012}

WuKong, a middleware for service-oriented M2M systems, has set out to allow
programmers develop M2M applications with ease by introducing a new
programming paradigm called flow based programming (FBP) to offer drag-and-drop
software components and flow-chart like programs with automatic sensor
identifications, node configuration, and system re-configuration.~\cite{Reijers}
However, if a number of sensors or services failed, the whole system would be
brought down, therefore failover mechanism is especially crucial for enabling
IoT in the sense that applications could "deploy-once, run forever," and where
applications degrade gracefully under failures.


\section{Goals} % was Problem Definition

In this thesis, we study the fault tolerance capability in WuKong.
Users of WuKong deploy applications written in the form of flow based
programming. Application consists of a network of components where each
component represents a service in the physical network. When application is deployed, each
component is mapped to a service in the network. However, partial failures could
bring the whole system down, since each service depends on each other to
function. In WuKong, users are allowed to specify different user policies for
the same application so that systems can show personalized behaviors. 

The goal of this system is to provide failover for application components such
that it meets user's requirements specified in user policy. Thus the system also
needs to design a user friendly user policy for fault tolerance such that it is
intuitive for users to specify quantitatively how strong the fault tolerance
a component should have that could directly being mapped to the lower physical
layer. It is also important that the deployed system would be
able to detect, recover from failures, and reconfigure the system autonomously. 


\section{Challenges}

The way WuKong presents and models resources and applications, along with user
policy and requirements, makes an unique challenge: User requirements might
vary drastically from one to another. System has to embrace a variety of
top-level and low-level configurations so components would play along with each
other and eventually produce a working failover architecture for the network.
Encompassing a variety of devices with different form factors, memory storage,
radio bandwidth is also a distinct characteristics in IoT,
therefore the system and algorithmic design has to work among nodes
with different specifications. In addition, duplications can be
costly and redundant when devices are heterogeneous or versaile,
such that instead of replaced by a device counterpart, it would be
taken over by another local service peers.

%Distributed systems have some unique properties that makes this problem really hard is that communication between nodes are not reliable and the ordering of the messages received could be out of order or dropped. Therefore most existing work treat the problem as a consensus problem where, mostly a variant of the solution proposed by Leslie Lamport in his paper~\cite{Lamport2001} where acceptors need to come to a consensus for the value of a particular variable made by the proposers, and the learners will have to learn of that decision. Under the assumption of a finite state machine for every process, the ordering properties is really important among the acceptors so none of them could reach a different state thus deviating from consensus. However, we will show that this is unnecessary in our approach.

%It is a challenege designing a solution that is scalable and also pertaining to the limitations when typical distributed systems such as wireless sensor networks have tight resource constraints and usually deploy in large quantity which dooms the thought of storing or maintaining any additional states, resouces has to be used economically. 

\section{Related Work}

Previous work on the problems have not considered failover architecture for
applications where relationships among services are critical and for which they would
heavily influenced by user policies. Furthermore, after every
failure recovery, none explained how existing services could find replaced
services in such environment to the best of my knowledge.

In WSNs, failover techniques for data replications, and service redundancy are
typically adapt for applications only with predefined services, fixed user
requirements and services with only end-to-end links: read/write to local data
storage. One example of such work with local storage for replications is
described in~\cite{Ratnasamy2002}. In this work, some distinguished storage
nodes are specified by Hash functions to collect data of certain types.
Redundancy is achieved by storing replicas directly on neighbors nodes. But
applications are still restricted to end-to-end links, since there is only one
type of links in the application.
Having more than end-to-end links in a M2M system allows a higher degree of
complexity in applications to meet the user requirements when services could
build on top of other low-level services.

In \cite{Piotrowski2009}, a dynamic replication approach for local data storage
where replicas are randomly distributed within a predefined replication range
influenced by the specific replica number and/or its density is presented. 
Another dynamic replication approach for local data storage where replicas are
selected based on the scoring system defined by several physical resource traits
from self-inspection that could reactivate services based on already collected
and generated data~\cite{Neumann2010}. However, this approach does not consider
applications with dynamic user requirements, services with more complex links.

\section{Thesis Organization}

% an overview of subsequent chapters
Chapter~\ref{c:intro} gives an introduction to the system goals and challenges
and outline the approach used to solve the problem. Chapter~\ref{c:background}
gives a brief background overview of the topic that this work based on.  We
start by describing IoT, WSNs, and ends with an overview of WuKong.
Chapter~\ref{c:design} describes our system design for the WuKong fault
tolerance system. In this chapter we give detail description of our method and
algorithms, including user policy for fault tolerance, strips, and
reconfigurable redundancy architecture.  Chapter~\ref{c:evaluation} presents the
metrics we would use to measure system performance, which is followed by
evaluation of the results. Finally, chapter ~\ref{c:conclusion} presents the
conclusion of the work, list of contributions and future work.
